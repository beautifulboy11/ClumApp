{"version":3,"sources":["../../src/pages/login/login.module.ts","../../src/pages/login/login.ts"],"names":[],"mappings":"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","file":"9.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { IonicPageModule } from 'ionic-angular';\n\nimport { LoginPage } from './login';\n\n@NgModule({\n  declarations: [\n    LoginPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(LoginPage),\n    TranslateModule.forChild()\n  ],\n  exports: [\n    LoginPage\n  ]\n})\nexport class LoginPageModule { }\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/login/login.module.ts","import { Component, OnInit } from \"@angular/core\";\nimport { TranslateService } from \"@ngx-translate/core\";\nimport {\n  IonicPage,\n  NavController,\n  ToastController,\n  AlertController,\n  LoadingController,\n  MenuController\n} from \"ionic-angular\";\nimport { FormBuilder, Validators } from \"@angular/forms\";\nimport { AuthService } from \"../../providers/authentication-service/authentication-service\";\nimport { MainPage, ResetPasswordPage } from \"../pages\";\nimport { ScreenOrientation } from \"@ionic-native/screen-orientation\";\nimport { ApplicationUser } from \"../../models/applicationUser\";\n@IonicPage()\n@Component({\n  selector: \"page-login\",\n  templateUrl: \"login.html\"\n})\nexport class LoginPage implements OnInit {\n  public loginForm;\n  private submitAttempt: boolean = false;\n  private loginErrorString: string;\n  private loading: any;\n  private showImage: string;\n  model: ApplicationUser = { email: \"\", password: \"\" };\n  passicon: string = \"eye\";\n  type: string = \"password\";\n  margin_top: number;\n  noScroll: string = \"no-scroll\";\n  validEmail: boolean = false;\n  validPassword: boolean = false;\n  isFormValid: boolean;\n  email_dirty: string = \"form-control empty ok input-lg\";\n  password_dirty: string = \"form-control empty ok input-lg\";\n  constructor(\n    public navCtrl: NavController,\n    public authservice: AuthService,\n    public toastCtrl: ToastController,\n    public alertCtrl: AlertController,\n    public fb: FormBuilder,\n    public loadingCtrl: LoadingController,\n    public translateService: TranslateService,\n    private screenOrientation: ScreenOrientation,\n    private menu: MenuController\n  ) {    \n    this.translateService.get(\"LOGIN_ERROR\").subscribe(value => {\n      this.loginErrorString = value;\n    });\n\n    this.screenOrientation.onChange().subscribe(() => {\n      if (\n        this.screenOrientation.type ==\n        this.screenOrientation.ORIENTATIONS.PORTRAIT_PRIMARY\n      ) {\n        this.showImage = \"block\";\n        this.margin_top = 0;\n        this.noScroll = \"no-scroll\";\n      } else {\n        this.showImage = \"none\";\n        this.margin_top = -19;\n        this.noScroll = \"no-scroll\";\n      }\n    });\n  }\n\n  ngOnInit(){\n    this.createForm();\n  }\n\n  createForm(){\n    this.loginForm = this.fb.group({\n      email: [\n        \"\",\n        Validators.compose([\n          Validators.required,\n          Validators.pattern(/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,4}$/)\n        ])\n      ],\n      password: [\"\", Validators.required]\n    });\n  }\n\n  togglePasswordVisible(event) {\n    event.preventDefault();\n    if (this.passicon == \"eye\") {\n      this.passicon = \"eye-off\";\n      this.type = \"text\";\n    } else {\n      this.passicon = \"eye\";\n      this.type = \"password\";\n    }\n  }\n\n  public emailChanged() {\n    let field = \"email\";\n    this[field + \"changed\"] = true;\n    this.isFormValid = this.loginForm.valid;\n    this.validEmail = this.loginForm.controls.email.valid;\n    if (this.loginForm.controls.email.value === \"\") {\n      this.email_dirty = \"form-control empty ok input-lg\";\n    } else {\n      if(this.validEmail){\n        this.email_dirty = \"form-control not-empty ok input-lg\";\n\n      }else{\n        this.email_dirty = \"form-control not-empty not-ok input-lg\";\n      }\n    }\n  }\n\n  public passwordChanged() {\n    let field = \"password\";\n    this[field + \"changed\"] = true;\n    this.isFormValid = this.loginForm.valid;\n    this.validPassword = this.loginForm.controls.password.valid;\n    if (this.loginForm.controls.password.value === \"\") {\n      this.password_dirty = \"form-control empty not-ok input-lg\";\n    } else {\n      this.password_dirty = \"form-control not-empty ok input-lg\";\n    }\n  }\n\n  public Signup() {\n    this.navCtrl.push(\"SignupPage\");\n  }\n  public removeAuth(code: string): string {\n    return code\n      .substring(5)\n      .replace(\"-\", \" \")\n      .toUpperCase();\n  }\n\n  public Login(): any {\n    this.submitAttempt = true;\n    if (!this.isFormValid) {\n    } else {\n      var credentials = {\n        email: this.loginForm.controls.email.value,\n        password: this.loginForm.controls.password.value\n      };\n\n      this.authservice.doLogin(credentials).subscribe(\n        auth => {\n          this.navCtrl.setRoot(\"TabsPage\");\n        },\n        error => {\n          this.loading.dismiss().then(() => {\n            let alert = this.alertCtrl.create({\n              title: this.removeAuth(error.code),\n              message: error.message,\n              buttons: [\n                {\n                  text: \"Ok\",\n                  role: \"cancel\"\n                }\n              ]\n            });\n            alert.present();\n          });\n        }\n      );\n      this.loading = this.loadingCtrl.create({\n        dismissOnPageChange: true\n      });\n      this.loading.present();\n    }\n  }\n\n  public resetPassword() {\n    this.navCtrl.push(ResetPasswordPage);\n  }\n\n  ionViewDidEnter() {\n    this.menu.enable(false);\n  }\n\n  ionViewWillLeave() {\n    this.menu.enable(true);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/login/login.ts"],"sourceRoot":""}